<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Checking Overall Agreement | Comparing AI and Hand Counts of Deer</title>
  <meta name="description" content="This book documents an evaluation of an AI used to count deer in camera trap photos by comparing its output to hand counts of deer." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Checking Overall Agreement | Comparing AI and Hand Counts of Deer" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book documents an evaluation of an AI used to count deer in camera trap photos by comparing its output to hand counts of deer." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Checking Overall Agreement | Comparing AI and Hand Counts of Deer" />
  
  <meta name="twitter:description" content="This book documents an evaluation of an AI used to count deer in camera trap photos by comparing its output to hand counts of deer." />
  

<meta name="author" content="Courtney Check" />


<meta name="date" content="2021-04-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="database.html"/>
<link rel="next" href="site.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">AI vs Hand Counted Deer</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#project-goals"><i class="fa fa-check"></i><b>1.1</b> Project Goals</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#project-outline"><i class="fa fa-check"></i><b>1.2</b> Project Outline</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="database.html"><a href="database.html"><i class="fa fa-check"></i><b>2</b> Database Creation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="database.html"><a href="database.html#getting-necessary-packages"><i class="fa fa-check"></i><b>2.1</b> Getting Necessary Packages</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="database.html"><a href="database.html#install-dbi"><i class="fa fa-check"></i><b>2.1.1</b> Install DBI</a></li>
<li class="chapter" data-level="2.1.2" data-path="database.html"><a href="database.html#calling-packages-into-r"><i class="fa fa-check"></i><b>2.1.2</b> Calling packages into R</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="database.html"><a href="database.html#load-the-data"><i class="fa fa-check"></i><b>2.2</b> Load the Data</a></li>
<li class="chapter" data-level="2.3" data-path="database.html"><a href="database.html#clean-the-data"><i class="fa fa-check"></i><b>2.3</b> Clean the Data</a></li>
<li class="chapter" data-level="2.4" data-path="database.html"><a href="database.html#create-a-new-empty-sql-database"><i class="fa fa-check"></i><b>2.4</b> Create a New, Empty SQL Database</a></li>
<li class="chapter" data-level="2.5" data-path="database.html"><a href="database.html#append-the-cleaned-data-to-the-empty-sql-database"><i class="fa fa-check"></i><b>2.5</b> Append the Cleaned Data to the Empty SQL Database</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="overall.html"><a href="overall.html"><i class="fa fa-check"></i><b>3</b> Checking Overall Agreement</a></li>
<li class="chapter" data-level="4" data-path="site.html"><a href="site.html"><i class="fa fa-check"></i><b>4</b> Checking Site-level Agreement</a></li>
<li class="chapter" data-level="5" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>5</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Comparing AI and Hand Counts of Deer</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="overall" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Checking Overall Agreement</h1>
<p>First, I want to get a sense of the overall agreement between hand counts and AI counts. This will give an idea of the total amount of data we might be losing to the AI algorithm. To do this, I first have to calculate the difference between the AI and hand counts.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="overall.html#cb12-1" aria-hidden="true" tabindex="-1"></a>hand.counts <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(counts_db, <span class="st">&quot;SELECT * FROM hand_counts;&quot;</span>)</span>
<span id="cb12-2"><a href="overall.html#cb12-2" aria-hidden="true" tabindex="-1"></a>ai.counts <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(counts_db, <span class="st">&quot;SELECT * FROM ai_counts;&quot;</span>)</span>
<span id="cb12-3"><a href="overall.html#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="overall.html#cb12-4" aria-hidden="true" tabindex="-1"></a>ai_hand <span class="ot">&lt;-</span> hand.counts <span class="sc">%&gt;%</span> </span>
<span id="cb12-5"><a href="overall.html#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(ai.counts, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;jpg_name&quot;</span>, <span class="st">&quot;site_id&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-6"><a href="overall.html#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">diff =</span> n_animals <span class="sc">-</span> ai_count)</span></code></pre></div>
<p>Next, I look at the <em>mean</em>, <em>standard deviation</em>, and <em>range</em> of difference between AI and hand counts.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="overall.html#cb13-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">=</span> <span class="fu">mean</span>(ai_hand<span class="sc">$</span>diff)</span>
<span id="cb13-2"><a href="overall.html#cb13-2" aria-hidden="true" tabindex="-1"></a>s <span class="ot">=</span> <span class="fu">sd</span>(ai_hand<span class="sc">$</span>diff)</span>
<span id="cb13-3"><a href="overall.html#cb13-3" aria-hidden="true" tabindex="-1"></a>r <span class="ot">=</span> <span class="fu">range</span>(ai_hand<span class="sc">$</span>diff)</span></code></pre></div>
<p>Here’s the <strong>Mean</strong>:</p>
<pre><code>## [1] 0.005713605</code></pre>
<p>Here’s the <strong>Standard Deviation</strong>:</p>
<pre><code>## [1] 0.1933531</code></pre>
<p>Here’s the <strong>Range</strong>:</p>
<pre><code>## [1] -4  8</code></pre>
<p>From this, I can see that the mean and sd are very low, but the range shows that there are still some pretty big miscounts by the AI. So I also want to check how often the AI makes “big” miscalculations. “Big” in this case, is any instance of &gt; +/-1 deer.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="overall.html#cb17-1" aria-hidden="true" tabindex="-1"></a>ai_hand <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="overall.html#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(diff) <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href="overall.html#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="overall.html#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent =</span> <span class="fu">round</span>((freq<span class="sc">/</span><span class="fu">sum</span>(freq)<span class="sc">*</span><span class="dv">100</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb17-5"><a href="overall.html#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">&quot;Count Difference&quot;</span> <span class="ot">=</span> diff,</span>
<span id="cb17-6"><a href="overall.html#cb17-6" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;Frequency&quot;</span> <span class="ot">=</span> freq,</span>
<span id="cb17-7"><a href="overall.html#cb17-7" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;Percent of Observations&quot;</span> <span class="ot">=</span> percent) <span class="sc">%&gt;%</span></span>
<span id="cb17-8"><a href="overall.html#cb17-8" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">align =</span> <span class="st">&quot;c&quot;</span>) </span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="center">Count Difference</th>
<th align="center">Frequency</th>
<th align="center">Percent of Observations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">-4</td>
<td align="center">1</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">-3</td>
<td align="center">7</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">-2</td>
<td align="center">47</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">-1</td>
<td align="center">1399</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">130883</td>
<td align="center">97</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">1604</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">250</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">3</td>
<td align="center">39</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">4</td>
<td align="center">4</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">5</td>
<td align="center">1</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">6</td>
<td align="center">2</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">7</td>
<td align="center">1</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">8</td>
<td align="center">3</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<p>Looks like most of the AI’s counts are within the +/-1 deer range! The big miscounts make up only less than one percent of the counts.</p>
<p>Overall, agreement seems pretty good! The mean and sd are very low, and even though there some big miscounts, they are a very small portion of all the counts.</p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="database.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="site.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Count_Check_Bookdown.pdf", "Count_Check_Bookdown.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
